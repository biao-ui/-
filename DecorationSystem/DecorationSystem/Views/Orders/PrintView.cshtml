@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/layuimini-v2/lib/layui-v2.6.3/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuimini-v2/css/public.css" media="all">
    <style>
        body {
            background-color: #ffffff;
        }

        .title {
            text-align: center;
        }

        .customInfo {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }

            .customInfo div {
                margin-right: 30px;
            }

        .tableTr {
            padding: 10px 60px;
        }

        table {
            margin: 0 auto;
        }

            table td {
                text-align: center;
            }

        .totalPrice {
            text-align: left;
            padding: 10px
        }
    </style>
</head>
<body>

    <h1 class="title">家园装饰工程有限公司工程预算清单</h1>
    <div class="customInfo">
        <div>客户名称:</div>
        <div>客户电话:</div>
        <div>建筑面积:</div>
        <div>公司:</div>
    </div>
    <table border="1" id="rarentSelect">
        <tr>
            <td class="tableTr" rowspan="2">编号</td>
            <td class="tableTr" rowspan="2">材料</td>
            <td class="tableTr" colspan="4">工程造价</td>

            <td class="tableTr" colspan="2">单位价值</td>

            <td class="tableTr" rowspan="2">备注</td>
        </tr>
        <tr>

            <td class="tableTr">单位</td>
            <td class="tableTr">数量</td>
            <td class="tableTr">单价</td>
            <td class="tableTr">金额</td>
            <td class="tableTr">主材</td>
            <td class="tableTr">人工</td>
        </tr>
        @*<tr>
                <td class="tableTr">1</td>
                <td class="tableTr">瓷砖</td>
                <td class="tableTr">片</td>
                <td class="tableTr">2</td>
                <td class="tableTr">20</td>
                <td class="tableTr">40</td>
                <td class="tableTr">15</td>
                <td class="tableTr">2</td>
                <td class="tableTr">111</td>
            </tr>*@
        <tr>
            <td class="totalPrice" id="SettleAnAccount" colspan="9">
                小计:340（￥）
            </td>
        </tr>
        <tr>
            <td class="totalPrice" colspan="7">
                备注:
            </td>
            <td class="totalPrice">
                经办人:
            </td>
            <td class="totalPrice">
                客户签名:
            </td>
        </tr>
    </table>

    <script src="/layuimini-v2/lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
    <script>
        layui.use(['form'], function (data) {
            var form = layui.form,
                layer = layui.layer,
                $ = layui.$;

            var id = window.location.search.substring(4)

            console.log(id)
            //发起异步请求，获取当前通知数据
            $.ajax({
                url: '/Orders/GetPrintDatas',
                type: 'get',
                data: {
                    ordersId: id
                },
                success: function (res) {
                    console.log(res);
                    var price = 0;
                    if (res.code == 0) {
                        for (let i = 0; i < res.data.length; i++) {
                            price += res.data[i].total
                            let rowHTML = '<tr>'; // 开始一个表格行
                            rowHTML += '<td class="tableTr">' + (i + 1) + '</td>';
                            for (let key in res.data[i]) { // 遍历对象的每个属性
                                if (res.data[i].hasOwnProperty(key)) { // 确保属性是对象自身的
                                    // 假设属性值是文本，可以直接添加到td中
                                    // 注意：根据实际需求，这里可能需要特殊处理（如HTML转义）
                                    rowHTML += '<td class="tableTr">' + res.data[i][key] + '</td>'; // 将属性值添加到td中
                                }
                            }
                            rowHTML += '</tr>'; // 结束表格行
                            let totalRow = $('#rarentSelect tr:last-child').prev();
                            //$('#rarentSelect').append(rowHTML); // 将完整的行添加到表格中
                            $(totalRow).before(rowHTML);
                        }
                        console.log(price)
                        $('#SettleAnAccount').text('小计:' +price +'（￥）');
                    } else {
                        layer.msg("查询不到通知")
                    }
                }
            });
            return false;
        });
    </script>
</body>
</html>